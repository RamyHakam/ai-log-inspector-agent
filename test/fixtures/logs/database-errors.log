[2025-09-09 13:15:22] production.ERROR: Doctrine\DBAL\Exception\ConnectionException: Too many connections {"connectionName":"default","maxConnections":100,"currentConnections":101,"host":"db-primary.internal"} ["App\\Repository\\OrderRepository::findById","App\\Controller\\OrderController@show"]
[2025-09-09 13:16:45] production.ERROR: PDOException: SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction {"query":"UPDATE orders SET status = ? WHERE id = ?","bindings":["completed",12345],"lockTimeout":"50s"} ["App\\Repository\\OrderRepository::updateStatus"]
[2025-09-09 13:17:33] production.WARNING: Slow query detected {"query":"SELECT * FROM products p LEFT JOIN categories c ON p.category_id = c.id WHERE p.status = 'active'","executionTime":"5.234s","threshold":"1.0s"} ["App\\Repository\\ProductRepository::findActive"]
[2025-09-09 13:18:01] production.ERROR: Doctrine\DBAL\Exception\DeadlockException: Deadlock found when trying to get lock {"table":"order_items","query":"INSERT INTO order_items (order_id, product_id, quantity, price) VALUES (?, ?, ?, ?)","errorCode":"1213"} ["App\\Repository\\OrderItemRepository::create"]
[2025-09-09 13:19:15] production.CRITICAL: Database connection lost {"connectionName":"default","host":"db-primary.internal","port":3306,"database":"ecommerce_prod","lastError":"MySQL server has gone away","reconnectAttempts":3} ["Doctrine\\DBAL\\Connection::ping"]
[2025-09-09 13:20:42] production.ERROR: Doctrine\DBAL\Exception\TableNotFoundException: Table 'ecommerce_prod.user_sessions' doesn't exist {"query":"SELECT * FROM user_sessions WHERE session_id = ?","table":"user_sessions"} ["App\\Repository\\UserSessionRepository::findBySessionId"]
[2025-09-09 13:21:18] production.WARNING: Connection pool exhausted {"poolSize":20,"activeConnections":20,"waitingRequests":5,"avgWaitTime":"2.3s"} ["App\\Service\\DatabaseConnectionPool::getConnection"]
[2025-09-09 13:22:05] production.ERROR: Exception: Foreign key constraint fails {"table":"order_items","constraint":"fk_order_items_product_id","query":"INSERT INTO order_items SET order_id=123, product_id=999","foreignKey":"product_id","referencedTable":"products"} ["App\\Repository\\OrderItemRepository::create"]
[2025-09-09 13:23:33] production.ERROR: Doctrine\DBAL\Exception\SyntaxErrorException: Syntax error or access violation {"query":"SELCT * FROM users WHERE email = ?","sqlState":"42000","errorInfo":["42000",1064,"You have an error in your SQL syntax"]} ["App\\Repository\\UserRepository::findByEmail"]
[2025-09-09 13:24:01] production.WARNING: Read replica lag detected {"replicaHost":"db-read-1.internal","lagTime":"45.2s","threshold":"30.0s","query":"SELECT COUNT(*) FROM orders WHERE created_at > NOW() - INTERVAL 1 HOUR"} ["App\\Service\\DatabaseHealthChecker::checkReplicaLag"]
